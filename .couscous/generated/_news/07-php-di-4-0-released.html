<!DOCTYPE html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>PHP-DI 4.0 released - The Dependency Injection Container for humans</title>
    <meta name="description" content="PHP-DI is a Dependency Injection Container for PHP that intends to be practical and powerful">

    <link rel="canonical" href="http://php-di.org" />

    <meta name="application-name" content="PHP-DI"/>
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/img/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16" />
    <meta name="msapplication-TileColor" content="#484949" />
    <meta name="msapplication-TileImage" content="/img/mstile-144x144.png" />

            <link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet">
        <link href="/styles/highlight.github.css" rel="stylesheet">
        
        <link rel="stylesheet" href="https://patterns-dev.pega.com/styles/pegakit/pegakit.css" media="all">
        <link href="/styles/all.min.css" rel="stylesheet">
        
        <style>
          table {
            width: 100%;
          }
        </style>
    </head>
<body>

    <header>
        <div class="navbar navbar-default navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#top-navigation">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/">PegaKit</a>
                </div>
                <div class="navbar-form navbar-left hidden-xs hidden-sm">
                    <input id="search-input" type="text" class="form-control" placeholder="Search...">
                </div>
                <div class="collapse navbar-collapse" id="top-navigation">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="/docs/getting-started.html">Getting started</a></li>
                        <li><a href="/docs/">Documentation</a></li>
                        <!-- <li><a href="/news/">News</a></li> -->
                        
                        <li><a href="/change-log.html">Change log</a></li>
                        
                        <li><a class="github" href="https://github.com/pegasystems/pega-digital-design-system"><i class="fa fa-github"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </header>

    
    <section class="container">
        <div class="row">
            <div class="col-md-9">

                
    <article>
        <h1>PHP-DI 4.0 released</h1>

        <p class="article-information">
            Posted by Matthieu Napoli on February 1st 2014
        </p>

        <p>I am extremely happy to announce that, after 4 months of work and more than 150 commits, PHP-DI version 4.0 has been released!</p>
<p>This is a new major release, and it delivers. As indicated by &quot;major release&quot;, it comes with BC breaks, but this is for the better.</p>
<p><em>PHP-DI 3.x users: BC-breaks are detailed in the <a href="../change-log.html">change log</a>, read the <a href="../doc/migration/4.0.html">migration guide from 3.x to 4.0</a>.</em></p>
<h2 id="whats-new">What's new?</h2>
<h3 id="completely-new-definition-format">Completely new definition format</h3>
<p>PHP-DI 3.x offered several definition formats, such as:</p>
<ul>
<li>autowiring (use of reflection)</li>
<li>annotations</li>
<li>YAML</li>
<li>PHP array</li>
<li>various undocumented, unstable formats (XML, JSON)â€¦</li>
</ul>
<p>PHP-DI 4.0 now offers:</p>
<ul>
<li>autowiring (unchanged)</li>
<li>annotations (very few changes)</li>
<li>PHP definitions</li>
</ul>
<p>The last one is completely new, and is the result of several months of brainstorming and trials.
It is meant to be much more powerful and simpler to write and understand.</p>
<p>You can read more about <a href="06-php-di-4-0-new-definitions.html">why the definition format has changed</a>.</p>
<h3 id="container-methods">Container methods</h3>
<p>The container now offers new methods in addition to <code>get($id)</code>:</p>
<ul>
<li><code>has($id)</code> will return <code>true</code> or <code>false</code> depending on if the container can provide the entry.</li>
</ul>
<p>This method is also useful to make PHP-DI comply with future standards, and to improve container interoperability
(most containers have this method).</p>
<ul>
<li><code>make($id, $params = [])</code> will <strong>create</strong> a new instance of the service using the given parameters.</li>
</ul>
<p>Missing parameters are provided by the container. This is essentially the same as <code>get()</code>, except it ignores
the singleton scope.</p>
<p>This method makes the container work like a factory, so a new <code>FactoryInterface</code> has been introduced so that
you can type-hint against the interface and not couple yourself to the container.</p>
<h3 id="framework-integration">Framework integration</h3>
<p>PHP-DI now works with Symfony 2 and Zend Framework 1 &amp; 2!</p>
<p>It is actually pretty easy making PHP-DI work with any other framework, feel free to start a discussion
about your favorite framework on GitHub.</p>
<h3 id="container-interoperability">Container interoperability</h3>
<p>PHP-DI 4 has been thought so that it could work hand in hand with <strong>other</strong> containers.
For example, in the Symfony 2 integration, PHP-DI works perfectly along Symfony's native container.</p>
<p>PHP-DI also participates in the <a href="https://github.com/container-interop/container-interop">Container Interop</a> initiative.
This group aims to provide interfaces that will help making different containers and frameworks work together.
While Container Interop has not released a stable version yet, PHP-DI is ready and will probably use it in v4.1.</p>
<h3 id="better-documentation">Better documentation</h3>
<p>Documentation is extremely important and a great care has been taken to:</p>
<ul>
<li>update the documentation following the new major release</li>
<li>improve the existing documentation and make it more readable</li>
</ul>
<h3 id="code-quality">Code quality</h3>
<p>This new major version also comes with even more code quality.</p>
<ul>
<li>Better architecture</li>
</ul>
<p>A large part of the internals of PHP-DI has been rewritten for this new version. The core is now much more maintainable,
testable and extensible. Adding new features should be easier, and many edge cases that couldn't supported in 3.* are now fixed.</p>
<ul>
<li>Code coverage</li>
</ul>
<p>Functional tests have been removed from the code coverage reports, so that only unit tests are taken into account.
Furthermore, every unit test uses the <a href="http://phpunit.de/manual/3.7/en/appendixes.annotations.html#appendixes.annotations.covers"><code>@covers</code> annotation</a> from PHPUnit.</p>
<p>This allows to have a much more realistic and useful code coverage report. To give you an idea, the code coverage
<strong>dropped from 91% to 60%</strong>! A lot of work has been put into testing, and now the code coverage is back up to more than 85%.</p>
<ul>
<li>Scrutinizer-CI</li>
</ul>
<p>The overall Scrutinizer-CI index went from <strong>7.9</strong> to <strong>9.0</strong>! Most issues have been fixed:</p>
<p><img src="scrutinizer-issues.png" alt="Scrutinizer report" /></p>
<h3 id="many-small-improvements">Many small improvements</h3>
<p>PHP-DI 4 comes with many small improvements too, and rather than list them all, you can see them in the <a href="../change-log.html">change log</a>.</p>
<h2 id="installing-php-di-40">Installing PHP-DI 4.0</h2>
<p>Just require <code>"mnapoli/php-di"</code> and <a href="../doc/getting-started.html">get started</a>.</p>
<p>Already using PHP-DI 3? Then edit your composer configuration:</p>
<pre><code class="language-json">{
    "require": {
        "mnapoli/php-di": "~4.0"
    }
}</code></pre>
<p>and run <code>composer update</code>.</p>
<p>You can also read the <a href="../doc/migration/4.0.html">migration guide from 3.x to 4.0</a>.</p>
<h2 id="change-log">Change log</h2>
<p>You can also read the complete <a href="../change-log.html">change log</a>.</p>
    </article>


            </div>

            <div class="col-md-3">
                <h3>
                    All posts
                </h3>

                <ul class="all-posts list-unstyled">
                    <li>
                        <a href="/news/20-php-di-5-4-released.html">PHP-DI 5.4 released</a>
                    </li>
                    <li>
                        <a href="/news/19-php-di-5-3-released.html">PHP-DI 5.3 released</a>
                    </li>
                    <li>
                        <a href="/news/18-slim-bridge-released.html">Introducing the PHP-DI bridge for Slim</a>
                    </li>
                    <li>
                        <a href="/news/17-php-di-5-2-released.html">PHP-DI 5.2 released</a>
                    </li>
                    <li>
                        <a href="/news/16-php-di-5-1-released.html">PHP-DI 5.1 released</a>
                    </li>
                    <li>
                        <a href="/news/15-php-di-5-0-released.html">PHP-DI 5.0 released</a>
                    </li>
                    <li>
                        <a href="/news/14-php-di-5-syntaxic-sugar.html">Syntactic sugar in PHP-DI 5</a>
                    </li>
                    <li>
                        <a href="/news/13-php-di-4-4-released.html">PHP-DI 4.4 released</a>
                    </li>
                    <li>
                        <a href="/news/12-php-di-is-better-with-php-5-6.html">PHP 5.6 is out and PHP-DI just got better</a>
                    </li>
                    <li>
                        <a href="/news/11-php-di-4-3-released.html">PHP-DI 4.3 released</a>
                    </li>
                    <li>
                        <a href="/news/10-php-di-4-2-released.html">PHP-DI 4.2 released</a>
                    </li>
                    <li>
                        <a href="/news/09-php-di-4-1-released.html">PHP-DI 4.1 released</a>
                    </li>
                    <li>
                        <a href="/news/08-10000-installs.html">10.000 installs!</a>
                    </li>
                    <li>
                        <a href="/news/07-php-di-4-0-released.html">PHP-DI 4.0 released</a>
                    </li>
                    <li>
                        <a href="/news/06-php-di-4-0-new-definitions.html">What will change in PHP-DI 4: the new definition format</a>
                    </li>
                    <li>
                        <a href="/news/05-php-di-3-5.html">PHP-DI 3.5 released</a>
                    </li>
                    <li>
                        <a href="/news/04-php-di-3-4.html">PHP-DI 3.4 released</a>
                    </li>
                    <li>
                        <a href="/news/03-php-di-3-3.html">PHP-DI 3.3 released</a>
                    </li>
                    <li>
                        <a href="/news/02-php-di-3-2.html">PHP-DI 3.2 released</a>
                    </li>
                </ul>
            </div>

        </div>
    </section>


            <footer>
            <div class='container'>
                                    <p>
                        Questions? Can't find what you're looking for?
                        Please <a href="https://github.com/pegasystems/pegakit/issues/new">create an issue</a>
                        or chat with us on Slack
                        <!-- <a href="https://gitter.im/PHP-DI/PHP-DI">Gitter</a> -->
                    </p>
                                
                <!-- <p>
                    By <a href="http://mnapoli.fr/">Matthieu Napoli</a>
                    and <a href="https://github.com/pegasystems/pegakit/graphs/contributors">contributors</a>
                    |
                    Website generated with
                    <a href="http://couscous.io" target="_blank">Couscous</a>.
                </p> -->
            </div>
        </footer>
    
              <script
        src="https://code.jquery.com/jquery-3.1.1.min.js"
        integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
        crossorigin="anonymous"></script>
          
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>

        <script>
            $(function() {
                hljs.initHighlightingOnLoad();

                // Add anchors to headers
                $('article h2, article h3, article h4, article h5').each(function () {
                    var url = document.URL.replace(/#.*$/, "") + '#' + $(this).attr('id');
                    $(this).append(' <a class="anchor" href="' + url + '">#</a>');
                });
            });
        </script>
    



    <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
    <script type="text/javascript">
        $(function () {
            var search = docsearch({
                apiKey: 'ef6af24cbacae1f85d3c44741df49167',
                indexName: 'php-di',
                inputSelector: '#search-input'
            });
            var delay = (function () {
                var timer = 0;
                return function (callback, ms) {
                    clearTimeout(timer);
                    timer = setTimeout(callback, ms);
                };
            })();
            search.autocomplete.on('autocomplete:selected', function (e, suggestion) {
                var articleTitle = suggestion.subcategory;
                // Strip HTML tags
                var div = document.createElement("div");
                div.innerHTML = articleTitle;
                articleTitle = div.textContent || div.innerText || "";
                // _gaq.push(['_trackEvent', 'search', 'click', articleTitle]);
            });
            $('#search-input').bind('input', function () {
                var search = $(this).val();
                if (search.length < 3) {
                    return;
                }
                // delay(function () {
                //     _gaq.push(['_trackPageview', '/search?q=' + search]);
                // }, 600);
            });
        });
    </script>
        <!-- Livereload -->
        <script>
            document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] +
                    ':35729/livereload.js?snipver=1"></' + 'script>')
        </script>
        <!-- End Livereload -->
    </body>
</html>